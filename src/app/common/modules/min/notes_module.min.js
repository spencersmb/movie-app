angular.module("MovieApp.models.notes",[]).service("NotesModel",function(e,t){function n(e){return e.data}function o(e){return l=n(e),angular.forEach(l,function(e){var t=e.releaseDate;t=_.without(t,"2015");var n=t.slice(5),o=n.join("");return console.log(o),e.releaseDate=o,e}),l}var r=new Date,i=r.getDate(),a=r.getMonth()+1,u=r.getFullYear();10>i&&(i="0"+i),10>a&&(a="0"+a);var l,s,c=u+"-"+a+"-"+i,f=10991,d="http://data.tmsapi.com/v1.1/theatres/",g="/showings?startDate="+c,v="&imageSize=Lg&imageText=true&api_key=ew825g4medr9bpfy7reqzd5t",h=this,p={FETCH:d+f+g+v};h.getNotes=function(){return l?t.when(l):e.get(p.FETCH).then(o)},h.setCurrentNote=function(e){return h.getNoteById(e).then(function(e){s=e})},h.getCurrentNoteTitle=function(){return s?s.title:""},h.getMovieById=function(e){function n(){return _.find(l,function(t){return t.title==e})}console.log(e);var o=t.defer();return l?o.resolve(n()):h.getNotes().then(function(){o.resolve(n())}),o.promise},h.updateNote=function(e){var t=_.findIndex(l,function(t){return t.id==e.id});l[t]=e},h.deleteBookmark=function(e){var t=_.filter(l,function(t){return t.id===e.id});if(t){var n=_.indexOf(l,e);l.splice(n,1)}},h.createNote=function(e){e.id=l.length+1,console.log(e.id),l.push(e)},h.releaseDates=function(e){var t=e;t=_.without(e,"2015");var n=e.slice(5);return console.log(n),n},h.options=[{label:"Alphabetical",value:"title"},{label:"Newest Movies",value:"-releaseDate"}]});