angular.module("MovieApp.models.notes",[]).service("NotesModel",function(e,t){function n(e){return e.data}function r(e){return i=n(e)}var i,o,u=this,d={FETCH:"http://data.tmsapi.com/v1.1/theatres/10991/showings?startDate=2015-04-06&imageSize=Lg&imageText=true&api_key=ew825g4medr9bpfy7reqzd5t"};u.getNotes=function(){return i?t.when(i):e.get(d.FETCH).then(r)},u.setCurrentNote=function(e){return u.getNoteById(e).then(function(e){o=e})},u.getCurrentNoteTitle=function(){return o?o.title:""},u.getNoteById=function(e){function n(){return _.find(i,function(t){return t.id==e})}var r=t.defer();return i?r.resolve(n()):u.getNotes().then(function(){r.resolve(n())}),r.promise},u.updateNote=function(e){var t=_.findIndex(i,function(t){return t.id==e.id});i[t]=e},u.deleteBookmark=function(e){var t=_.filter(i,function(t){return t.id===e.id});if(t){var n=_.indexOf(i,e);i.splice(n,1)}},u.createNote=function(e){e.id=i.length+1,console.log(e.id),i.push(e)}});